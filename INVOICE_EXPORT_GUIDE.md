# دليل تصدير الفواتير 📄

## نظام تصدير الفواتير المطور

تم تطوير نظام تصدير الفواتير ليدعم عدة صيغ مختلفة لتلبية احتياجات المستخدمين المختلفة.

## الميزات الجديدة ✨

### 1. تصدير PDF
- **تحويل فوري**: تحويل الفاتورة إلى ملف PDF عالي الجودة
- **جودة طباعة ممتازة**: بدقة 2x للحصول على نتائج واضحة
- **دعم متعدد الصفحات**: في حالة الفواتير الطويلة
- **تسمية تلقائية**: `فاتورة-[رقم_الطلب]-[التاريخ].pdf`

### 2. تصدير كصورة
- **صيغة PNG**: للحصول على أفضل جودة وشفافية
- **صيغة JPG**: لحجم ملف أصغر
- **دقة عالية**: بدقة 3x للحصول على صور واضحة جداً
- **خلفية بيضاء**: مضمونة لجميع الصيغ

### 3. طباعة محسّنة
- **نافذة طباعة منفصلة**: لتجربة طباعة أفضل
- **تنسيق محسّن للطباعة**: بستايل خاص بالطباعة
- **إغلاق تلقائي**: بعد انتهاء الطباعة

## كيفية الاستخدام 🚀

### من صفحة الطلبات:

#### 1. طريقة القائمة المنسدلة:
1. اضغط على أيقونة الثلاث نقاط (⋮) بجانب أي طلب
2. اختر من القائمة:
   - **طباعة الفاتورة**: للطباعة المباشرة
   - **تصدير كـ PDF**: لحفظ ملف PDF
   - **تصدير كصورة PNG**: لحفظ صورة عالية الجودة
   - **تصدير كصورة JPG**: لحفظ صورة بحجم أصغر

#### 2. من نافذة تفاصيل الطلب:
1. اضغط على "عرض التفاصيل" لأي طلب
2. في أسفل النافذة، اختر من الأزرار:
   - **طباعة**: للطباعة المباشرة
   - **PDF**: لتصدير PDF
   - **PNG**: لتصدير صورة PNG
   - **JPG**: لتصدير صورة JPG
   - **إيميل**: لإرسال الفاتورة بالبريد الإلكتروني

## الإشعارات 🔔

سيتم عرض إشعارات لإعلامك بحالة العملية:
- **"جاري إنشاء ملف PDF..."**: أثناء تحويل PDF
- **"جاري إنشاء الصورة..."**: أثناء تحويل الصورة  
- **"تم تصدير الفاتورة كـ PDF بنجاح"**: عند اكتمال التصدير
- **"حدث خطأ أثناء التصدير"**: في حالة حدوث مشكلة

## المواصفات التقنية ⚙️

### PDF:
- **المكتبة**: jsPDF + html2canvas
- **الحجم**: A4 (210mm × 295mm)
- **الدقة**: Scale 2x
- **التنسيق**: Portrait (عمودي)

### الصور:
- **PNG**: 
  - شفافية مدعومة
  - جودة عالية
  - حجم ملف أكبر
- **JPG**: 
  - بدون شفافية
  - حجم ملف أصغر  
  - جودة ممتازة

### دقة الصور:
- **PDF**: Scale 2x (دقة ممتازة للطباعة)
- **الصور**: Scale 3x (دقة فائقة للعرض الرقمي)

## استكشاف الأخطاء 🔧

### المشاكل الشائعة:

1. **"لا يمكن العثور على عنصر الفاتورة"**:
   - تأكد من وجود بيانات الطلب
   - حاول إعادة تحميل الصفحة

2. **"حدث خطأ أثناء التصدير"**:
   - تحقق من اتصال الإنترنت
   - تأكد من دعم المتصفح للميزة
   - جرب مسح الكاش

3. **جودة ضعيفة في التصدير**:
   - استخدم صيغة PNG للحصول على أفضل جودة
   - تأكد من أن حجم الشاشة مناسب

### المتصفحات المدعومة:
- ✅ Chrome (مُستحسن)
- ✅ Firefox
- ✅ Safari
- ✅ Edge
- ⚠️ Internet Explorer (غير مدعوم)

## الملفات المضافة 📁

```
src/
├── admin/
│   ├── components/
│   │   ├── InvoiceExporter.jsx     # وظائف التصدير الجديدة
│   │   └── InvoicePrint.jsx        # مكون الفاتورة المحسّن
│   └── pages/
│       └── Orders.jsx              # صفحة الطلبات المحدثة
```

## التحديثات في الكود 🔄

### الحزم الجديدة:
```bash
npm install html2canvas jspdf
```

### الوظائف الجديدة:
- `exportInvoiceAsPDF()`: تصدير PDF
- `exportInvoiceAsImage()`: تصدير صورة
- `printInvoice()`: طباعة محسّنة

## نصائح للاستخدام الأمثل 💡

1. **للطباعة الرسمية**: استخدم تصدير PDF
2. **للمشاركة السريعة**: استخدم صورة PNG
3. **لتوفير المساحة**: استخدم صورة JPG
4. **للطباعة المباشرة**: استخدم زر الطباعة

## المميزات المضافة 🎯

- ✅ تصدير فوري بدون انتظار
- ✅ جودة عالية للطباعة والعرض
- ✅ أسماء ملفات ذكية تتضمن رقم الطلب والتاريخ
- ✅ إشعارات واضحة لحالة العملية
- ✅ دعم اللغة العربية بالكامل
- ✅ تصميم احترافي للفواتير
- ✅ معلومات شاملة في كل فاتورة

## الدعم والمساعدة 📞

في حالة مواجهة أي مشاكل:
1. تحقق من وحدة التحكم في المتصفح للأخطاء
2. تأكد من تحديث المتصفح لأحدث إصدار
3. جرب المتصفحات المختلفة للمقارنة
4. راجع إعدادات المتصفح للسماح بالتحميل

---

**تم تطوير هذا النظام بعناية لتوفير تجربة مستخدم ممتازة في تصدير الفواتير** 🚀 